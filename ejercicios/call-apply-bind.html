<html>
    <head>
        <title>
            Function.prototype.call, Function.prototype.apply,
            Function.prototype.bind
        </title>
    </head>

    <body>
        <a href="/ejercicios/">Go back</a>
        <p><em>Abre la consola</em></p>

        <ul>
            <li><button class="call-to-action">Aprender</button></li>
            <li><button class="call-to-action">Aprender Más</button></li>
            <li>
                <button class="call-to-action">
                    ¡Nunca parar de Aprender!
                </button>
            </li>
        </ul>

        <script>
            // Establece `this` usando `call`
            console.log(
                "--------- Call pasando un objeto pero sin mas argumentos"
            );
            function salute() {
                console.log(`Hola, yo soy ${this.name} ${this.surname}`);
            }

            const person = { name: "Alexis", surname: "Villalva" };

            salute.call(person);

            // Establece `this` usando `call` y pasar argumentos a la función
            console.log(
                "--------- Call pasando un objeto y argumentos a la funcion"
            );
            function walk(metros, direccion) {
                console.log(
                    `${this.name} camina ${metros} metros hacia el ${direccion}`
                );
            }

            walk.call(person, 400, "norte");

            // Establece `this` usando `apply` y pasar argumentos a la función
            const valores = [2000, "sureste"];
            console.log(" /////// Apply con argumentos ///////");
            walk.apply(person, valores);

            /*
              Call - comma
              Apply - arreglo
            */

            // ----------------------------------- Establecer `this` en una nueva función usando `bind`----------------------------------------

            console.log(" Utilizand bind ////////");
            // retorna una nueva funcion con un nuevo contexto

            function ladrar(breed, age) {
                console.log(
                    `${this.name} esta ladrando, tiene ${age} anios y es ${breed}`
                );
            }

            const perro = { name: "Bob" };

            // estamos utilizando function currying, pasando un valor de forma estatica en el bind y uno de forma dinamica al llamaar ala funcion perroLadrando
            // nos permite hacer funciones reutilizables

            const perroLadrando = ladrar.bind(perro, "Labrador");
            perroLadrando(10);

            // Cuándo es útil usar uno de estos métodos

            // cuando por ejemplo, tenemos un arreglo y queremos realizar una accion para cada uno de sus elementos. Y este es un NodeList

            // NodeList
            const buttons = document.getElementsByClassName("call-to-action");
            console.log(buttons);
            // nodeElements.forEach();
            Array.prototype.forEach.call(buttons, (buttona) => {
                buttona.onclick = () => alert("Nunca pares de aprender");
            });
        </script>
    </body>
</html>
